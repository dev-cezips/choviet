<div id="<%= dom_id(user, :block_button) %>">
<% if current_user && user != current_user %>
  <% if current_user.blocking?(user) %>
    <%# Unblock button %>
    <% block = current_user.blocks_given.find_by(blocked: user) %>
    <%= button_to block_path(block), method: :delete, 
        class: "px-3 py-1.5 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition",
        data: { turbo_stream: true } do %>
      <% if current_user.vietnamese? %>
        Bỏ chặn
      <% else %>
        차단 해제
      <% end %>
    <% end %>
  <% else %>
    <%# Block button %>
    <%= button_to blocks_path, 
        params: { blocked_id: user.id },
        class: "px-3 py-1.5 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition",
        data: { 
          turbo_stream: true,
          turbo_confirm: current_user.vietnamese? ? 
            "Bạn có chắc muốn chặn người dùng này? Bạn sẽ không thể nhận tin nhắn từ họ." : 
            "이 사용자를 차단하시겠습니까? 상대방의 메시지를 받을 수 없게 됩니다."
        } do %>
      <% if current_user.vietnamese? %>
        Chặn
      <% else %>
        차단
      <% end %>
    <% end %>
  <% end %>
<% end %>
</div>