<% if user_signed_in? %>
  <% if post.liked_by?(current_user) %>
    <%= button_to post_like_path(post),
      method: :delete,
      form: { data: { turbo_stream: true } },
      class: "flex items-center justify-center gap-2 px-4 py-3 bg-red-50 text-red-500 rounded-lg font-medium hover:bg-red-100 transition-colors" do %>
      <span class="text-xl">❤️</span>
      <span><%= post.likes.count %></span>
    <% end %>
  <% else %>
    <%= button_to post_like_path(post),
      method: :post,
      form: { data: { turbo_stream: true } },
      class: "flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 text-gray-600 rounded-lg font-medium hover:bg-gray-200 transition-colors" do %>
      <span class="text-xl">🤍</span>
      <span><%= post.likes.count %></span>
    <% end %>
  <% end %>
<% else %>
  <%= link_to new_user_session_path, class: "flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 text-gray-600 rounded-lg font-medium hover:bg-gray-200 transition-colors" do %>
    <span class="text-xl">🤍</span>
    <span><%= post.likes.count %></span>
  <% end %>
<% end %>